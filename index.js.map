{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function fetchImg(query) {\n  const searchParams = new URLSearchParams({\n    key: '48878991-2a0545ca0b16ae8c479dd39cc',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  return fetch(url).then(response => {\n    if (!response.ok) {\n      throw new Error(response.status);\n    }\n    return response.json();\n  });\n}","export function createGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"/>\n        </a>\n        <div class=\"descr-list\">\n        <div class=\"descr-item\">\n        <b class=\"info\">Likes</b>\n        <span class=\"value\">${image.likes}</span>\n        </div>\n        <div class=\"descr-item\">\n        <b class=\"info\">Views</b>\n        <span class=\"value\">${image.views}</span>\n        </div>\n        <div class=\"descr-item\">\n        <b class=\"info\">Comments</b>\n        <span class=\"value\">${image.comments}</span>\n        </div>\n        <div class=\"descr-item\">\n        <b class=\"info\">Downloads</b>\n        <span class=\"value\">${image.downloads}</span>\n        </div>\n        </div>\n        </li>`\n    )\n    .join('');\n  gallery.innerHTML = markup;\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImg } from './js/pixabay-api';\nimport { createGallery, clearGallery } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\nconst galleryContainer = document.querySelector('.gallery');\nloader.hidden = true;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', searchImg);\n\nfunction searchImg(event) {\n  event.preventDefault();\n  const query = event.target.elements.image.value.trim();\n  if (!query) {\n    iziToast.warning({\n      message: 'Warning! The form is empty, please fill searching form.',\n      position: 'topRight',\n    });\n    form.reset();\n    return;\n  }\n\n  clearGallery();\n  form.reset();\n  loader.hidden = false;\n\n  fetchImg(query)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      createGallery(data.hits);\n\n      lightbox.refresh();\n    })\n    .catch(error => {\n      iziToast.error({\n        message: 'Error!',\n        position: 'topRight',\n      });\n      console.error(error);\n    })\n    .finally(() => {\n      loader.hidden = true;\n    });\n}"],"names":["fetchImg","query","url","response","createGallery","images","gallery","markup","image","clearGallery","form","loader","lightbox","SimpleLightbox","searchImg","event","iziToast","data","error"],"mappings":"6vBAAO,SAASA,EAASC,EAAO,CAQ9B,MAAMC,EAAM,4BAPS,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,CACmD,GAEpD,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAY,CACjC,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACpB,CAAG,CACH,CChBO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACCG,GACE;AAAA,sCAC8BA,EAAM,aAAa;AAAA,oBACrCA,EAAM,YAAY;AAAA,eACvBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKKA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,8BAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,8BAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,8BAIdA,EAAM,SAAS;AAAA;AAAA;AAAA,cAIxC,EACA,KAAK,EAAE,EACVF,EAAQ,UAAYC,CACtB,CAEO,SAASE,GAAe,CAC7B,MAAMH,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,CC9BA,MAAMI,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACtB,SAAS,cAAc,UAAU,EAC1DA,EAAO,OAAS,GAEhB,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDH,EAAK,iBAAiB,SAAUI,CAAS,EAEzC,SAASA,EAAUC,EAAO,CACxBA,EAAM,eAAc,EACpB,MAAMd,EAAQc,EAAM,OAAO,SAAS,MAAM,MAAM,OAChD,GAAI,CAACd,EAAO,CACVe,EAAS,QAAQ,CACf,QAAS,0DACT,SAAU,UAChB,CAAK,EACDN,EAAK,MAAK,EACV,MACD,CAEDD,IACAC,EAAK,MAAK,EACVC,EAAO,OAAS,GAEhBX,EAASC,CAAK,EACX,KAAKgB,GAAQ,CACZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,MAAM,CACb,QACE,2EACF,SAAU,UACpB,CAAS,EACD,MACD,CAEDZ,EAAca,EAAK,IAAI,EAEvBL,EAAS,QAAO,CACtB,CAAK,EACA,MAAMM,GAAS,CACdF,EAAS,MAAM,CACb,QAAS,SACT,SAAU,UAClB,CAAO,EACD,QAAQ,MAAME,CAAK,CACzB,CAAK,EACA,QAAQ,IAAM,CACbP,EAAO,OAAS,EACtB,CAAK,CACL"}